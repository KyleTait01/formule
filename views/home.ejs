<%- include('./partials/header.ejs') %>
<%- include('./partials/nav.ejs') %>

<% formatted_gp_name = chosen_gp.split('-').slice(1).map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ').replace('grand', 'Grand'); %>

<div id="game_screen" class="container text-center py-16">
    <table class="mx-auto mt-12">
        <thead>
            <tr>
                <th>Pos</th>
                <th>Driver</th>
                <th>Constructor</th>
                <th>Laps</th>
                <th>Time/Retired</th>
                <th>Points</th>
            </tr>
        </thead>
        <tbody>
            <% randomSheetData.forEach((row, i) => { %>
                <% if (i < 5){ %>
                <tr>
                    <% row.forEach((cell, j) => { %>
                        <td><%= cell %></td>
                    <% }); %>
                </tr>
                <% } %>
            <% }); %>
        </tbody>
    </table>

    <div class="flex justify-center items-center gap-x-4 mt-4">
        <select id="grand_prix_sel" name="grand_prix" class="w-full">
            <% lines.forEach(line => { %>
                <option><%= line %></option>
            <% }) %>
        </select>
        <select id="year_sel" name="year">
            <% for (var i = 2024; i >= 1950; i--){ %>
                <option><%= i %></option>
            <% } %>
        </select>
        <button id="submit_btn" name="submit" class="btn btn-submit">Submit</button>
    </div>

    <div id="guess_history" class="history mt-4"></div>
</div>

<h2>Random Sheet Name:</h2>
<p><%= sheetName %></p>

<%- include('./partials/footer.ejs') %>

<script>console.log('<%= sheetName %>')</script>