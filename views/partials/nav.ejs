<div id="nav" class="py-4 border-b border-[#FF1801]">
    <div class="container grid grid-cols-3 items-center">
        <span id="help_btn" class="cursor-pointer w-max"><%- include('../../dist/help-circle.svg') %></span>
        <h1 class="text-4xl font-semibold mx-auto">Formule</h1>
        <div class="ml-auto flex gap-x-4">
            <span class="cursor-pointer"><%- include('../../dist/bar-chart.svg') %></span>
            <span id="settings_btn" class="cursor-pointer rotate"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-settings"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg></span>
        </div>
    </div>
</div>

<div id="help_modal" class="modal left-0 top-0 fixed w-full h-full hidden z-20" style="background-color: rgba(0,0,0,0.5);">
    <div class="w-1/3 absolute top-1/3 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#303030] border border-[#505050] rounded-lg">
        <div class="heading border-b border-[#FF1801] py-2 px-4 mb-4 flex items-center">
            <h2 class="text-xl font-semibold">How to Play</h2>
            <span class="close-btn ml-auto text-4xl cursor-pointer">&times;</span>
        </div>
        <div class="body px-4 pb-2">
            <p>Guess the grand prix and year based off the top 5 standings of the race.</p>
            <p class="mt-2">If you get the correct continent but wrong grand prix, then the guess will be highlighted in orange.</p>
            <p class="mt-2">If you're close to the correct year then the guess will also be highlighted in yellow. You'll also get a clue if the year is more recent or further away.</p>
            <p class="mt-2">If you're spot on then the guess will be highlighted in green!</p>

            <div class="mt-8">
                <p class="text-xs inline">Created by <a href="https://github.com/KyleTait01" class="hover:underline"target="_blank"><span class="mr-2">Kyle Tait</span><%- include('../../dist/github.svg') %></a></p>
            </div>
        </div>
    </div>
</div>

<div id="settings_modal" class="modal left-0 top-0 fixed w-full h-full hidden z-20" style="background-color: rgba(0,0,0,0.5);">
    <div class="w-1/3 absolute top-1/3 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#303030] border border-[#505050] rounded-lg">
        <div class="heading border-b border-[#FF1801] py-2 px-4 mb-4 flex items-center">
            <h2 class="text-xl font-semibold">Settings</h2>
            <span class="close-btn ml-auto text-4xl cursor-pointer">&times;</span>
        </div>
        <div class="body px-4 pb-2">
            <h4>Dark Mode</h4>
            <label class="switch">
                <input type="checkbox" name="dark_mode" checked>
                <span class="slider round"></span>
            </label>

            <h4>Year Range</h4>
            <div class="slider-container mt-2">
                <div class="year-slider"></div>
            </div>
            <div class="range-input">
                <input type="range" class="min-range" min="1950" max="2024" step="1" value="1950">
                <input type="range" class="max-range" min="1950" max="2024" step="1" value="2024">
            </div>
            <div class="year-input flex mt-2">
                <label class="min-year">1950</label>
                <label class="max-year ml-auto">2024</label>
            </div>
            <button id="settings_submit" name="submit" class="btn btn-submit mt-4">Submit</button>
        </div>
    </div>
</div>

<script>
    helpBtn = document.getElementById("help_btn");
    helpModal = document.getElementById("help_modal");

    settingsBtn = document.getElementById("settings_btn");
    settingsModal = document.getElementById("settings_modal");

    modals = document.querySelectorAll(".modal");

    closeBtns = document.querySelectorAll(".close-btn");

    console.log(closeBtns);

    helpBtn.addEventListener("click", function(){
        helpModal.classList.remove("hidden");
    })

    settingsBtn.addEventListener("click", function(){
        settingsModal.classList.remove("hidden");
    })

    closeBtns.forEach((closeBtn) => {
        closeBtn.addEventListener("click", function(){
            modals.forEach((modal) => {
                modal.classList.add("hidden");
            })
        })
    })

    const rangevalue = document.querySelector(".slider-container .year-slider"); 
    const rangeInputvalue = document.querySelectorAll(".range-input input"); 
    const minLabel = document.querySelector(".year-input .min-year");
    const maxLabel = document.querySelector(".year-input .max-year");
    
    rangeInputvalue.forEach((rangeInput) => {
        rangeInput.addEventListener("input", function(){
            if (rangeInput.classList.contains("min-range")){
                minLabel.innerHTML = rangeInput.value;
            } else {
                maxLabel.innerHTML = rangeInput.value;
            }
        })
    })
</script>